/* ---------------------------
   Fixed 320x568 frame + safe stacking for settings icon
   --------------------------- */
:root{
  --frame-width: 320px;
  --frame-height: 568px;
  --page-bg: #D4D4D4; /* page background outside the frame */
  --cream: #fff7f0;
  --text: #2b2622;
  --card: #fff;
  --accent: #6fbf73;
  --green: #7ecf7b;
  --yes: #2fb36f;
  --no: #d9534f;
  --brown: #6b4b3d; /* nav background fallback */
}

/* Page background (outside the framed app) */
html, body {
  height: 100%;
  margin: 0;
  background: var(--page-bg);
}

/* Global font + color */
html, body, #app,
.screen, .prompt, .card, .row, .kv,
input, textarea, select, button, a, p, span,
h1, h2, h3, h4, h5, h6, label {
  font-family: "DynaPuff", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--text);
  box-sizing: border-box;
}

/* Center the app frame on the page */
#app{
  min-height:100vh;
  display:grid;
  place-items:center;
  padding: 24px;
}

/* The app 'screen' is the fixed-size frame (320x568) */
.screen{
  width: var(--frame-width);
  height: var(--frame-height);
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: var(--card);         /* white card inside */
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
  z-index: 1;                      /* ensure above page background */
}

/* Constrain settings icon so it can't grow and block content */
.settings{
  position:absolute;
  top:8px; left:8px;
  width:40px; height:40px;         /* fixed size */
  padding:0;
  display:inline-grid; place-items:center;
  background:transparent;
  border-radius:8px;
  overflow:hidden;                 /* clip oversized svg */
  z-index: 5;                      /* below main content */
}
.settings svg{
  width:20px; height:20px; display:block; fill: currentColor;
}

/* Make sure main content sits above settings icon */
.level-row, .prompt, .card, .footer-links {
  position: relative;
  z-index: 10;
}

/* Level + progress */
.level-row{
  display:flex; align-items:center; gap:12px;
  font-weight:700; font-size:1.1rem;
  margin:8px 8px 12px;
}
.level-sub{ font-weight:600; color:#3d2b1f; }
.progress{ flex:1; height:8px; background:#ddd; border-radius:6px; overflow:hidden; }
.progress > span{ display:block; height:100%; background:var(--accent); width:0% }

/* Prompt card */
.prompt{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  width: calc(100% - 32px);        /* fit nicely inside 320px frame */
  margin: 0 auto;
  box-shadow: 0 2px 0 rgba(0,0,0,.15) inset, 0 2px 8px rgba(0,0,0,.06);
}
.prompt h3{ margin:0 0 12px; font-size:1rem }
.prompt .actions{ display:flex; gap:12px }
.btn{
  appearance:none; border:0; cursor:pointer;
  padding:10px 16px; border-radius:12px; color:#fff; font-weight:700;
}
.btn.yes{ background:var(--yes) }
.btn.no{ background:var(--no) }
.xp{ margin-left:8px; font-weight:700; color:#246e3f }

/* Leaf buddy placeholder */
.leaf{
  position:absolute; right:12px; top:24px;
  font-size:48px; transform: rotate(-6deg);
}

/* Hills */
.hills{ position:absolute; left:0; right:0; bottom:64px; height:140px; }
.hill{
  position:absolute; bottom:0; width:55%; height:120px; background:var(--green);
  border-top-left-radius:120px; border-top-right-radius:120px;
}
.hill.left{ left:-5%; }
.hill.right{ right:-5%; width:65% }

/* Actions list */
.card{
  background:var(--card); border-radius:16px; padding:16px;
  margin:12px 8px; box-shadow: 0 2px 8px rgba(0,0,0,.06);
}
.row{ display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px dashed rgba(0,0,0,.1) }
.row:last-child{ border-bottom:0 }
.kv{ display:flex; gap:12px; }
.k{ opacity:.7; min-width:92px }
.toggle{ display:inline-flex; align-items:center; gap:8px; font-weight:700 }
.switch{ width:44px; height:26px; border-radius:999px; background:#bbb; position:relative; }
.switch::after{ content:""; position:absolute; width:20px; height:20px; top:3px; left:3px; border-radius:50%; background:#fff; transition:.2s; }
.switch.on{ background:var(--accent) }
.switch.on::after{ left:21px }

/* Footer quick links */
.footer-links{ display:flex; gap:12px; margin:12px 8px; }
.link-btn{ background:#ddd2b9; border:0; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600 }

/* Leaderboard */
.lb-row{ display:flex; align-items:center; justify-content:space-between; padding:10px 0; border-bottom:1px dashed rgba(0,0,0,.1) }
.lb-row:last-child{ border-bottom:0 }

/* Bottom navigation: centered under the frame */
.bottom-nav{
  position: fixed;
  width: var(--frame-width);
  left: 50%;
  transform: translateX(-50%);
  bottom: 12px;
  height: 72px;
  background: var(--brown, #6b4b3d);
  display:flex; justify-content:space-around; align-items:center;
  padding:10px 8px calc(env(safe-area-inset-bottom, 0) + 8px);
  z-index: 9999;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}
.nav-btn{
  width:56px; height:48px; border-radius:12px; border:none; color:#fff; background:transparent;
  display:grid; place-items:center; cursor:pointer; transition:.15s transform ease;
}
.nav-btn:active{ transform: translateY(1px) }
.nav-btn.active{ background:rgba(255,255,255,.12) }
.nav-btn svg{ width:28px; height:28px }
