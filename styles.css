/* ---------------------------
   global variables
   --------------------------- */
:root{
  --frame-width: 320px;
  --frame-height: 568px;
  --page-bg: #D4D4D4; /* page background requested by user */
  --cream: #fff7f0;
  --text: #2b2622;
  --card: #fff;
  --accent: #6fbf73;
  --green: #7ecf7b;
  --yes: #2fb36f;
  --no: #d9534f;
  --brown: #6b4b3d; /* fallback for bottom-nav */
}

/* Page background (outside the framed app) */
html, body {
  height: 100%;
  margin: 0;
  background: var(--page-bg);
}

/* Apply DynaPuff site-wide (index.html already preloads the font) */
html, body, #app,
.screen, .prompt, .card, .row, .kv,
input, textarea, select, button, a, p, span,
h1, h2, h3, h4, h5, h6, label {
  font-family: "DynaPuff", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--text);
}

/* Center the app frame on the page and reserve space for the nav under it.
   The #app becomes a viewport that centers the .screen frame. */
#app{
  min-height:100vh;
  display:grid;
  place-items:center;
  padding: 24px; /* small outer padding so frame doesn't touch edges on tiny viewports */
  box-sizing: border-box;
}

/* The app 'screen' is the fixed-size frame (320x568) */
.screen{
  width: var(--frame-width);
  height: var(--frame-height);
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  background: var(--card);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18);
}

/* If content inside expects the previous #app padding-bottom to avoid nav overlap,
   reduce that reliance because the nav is centered and aligned to the frame below. */
.progress{
  flex:1; height:8px; background:#ddd; border-radius:6px; overflow:hidden;
}
.progress > span{ display:block; height:100%; background:var(--accent); width:0% }

/* Prompt card */
.prompt{
  background:var(--card);
  color:var(--text);
  border-radius:16px;
  padding:16px;
  width:calc(min(520px, 92%) - 32px);
  box-sizing: border-box;
  box-shadow: 0 2px 0 rgba(0,0,0,.15) inset, 0 2px 8px rgba(0,0,0,.06);
}
.prompt h3{ margin:0 0 12px; font-size:1rem }
.prompt .actions{ display:flex; gap:12px }
.btn{
  appearance:none; border:0; cursor:pointer;
  padding:10px 16px; border-radius:12px; color:#fff; font-weight:700;
}
.btn.yes{ background:var(--yes) }
.btn.no{ background:var(--no) }
.xp{ margin-left:8px; font-weight:700; color:#246e3f }

/* Leaf buddy placeholder */
.leaf{
  position:absolute; right:12px; top:24px;
  font-size:48px; transform: rotate(-6deg);
}

/* Hills */
.hills{
  position:absolute; left:0; right:0; bottom:64px; height:140px;
}
.hill{
  position:absolute; bottom:0; width:55%; height:120px; background:var(--green);
  border-top-left-radius:120px; border-top-right-radius:120px;
}
.hill.left{ left:-5%; }
.hill.right{ right:-5%; width:65% }

/* Actions list */
.card{
  background:var(--card); border-radius:16px; padding:16px;
  margin:12px 8px; box-shadow: 0 2px 8px rgba(0,0,0,.06);
}
.row{ display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px dashed rgba(0,0,0,.1) }
.row:last-child{ border-bottom:0 }
.kv{ display:flex; gap:12px; }
.k{ opacity:.7; min-width:92px }
.toggle{
  display:inline-flex; align-items:center; gap:8px; font-weight:700
}
.switch{
  width:44px; height:26px; border-radius:999px; background:#bbb; position:relative;
}
.switch::after{
  content:""; position:absolute; width:20px; height:20px; top:3px; left:3px;
  border-radius:50%; background:#fff; transition:.2s;
}
.switch.on{ background:var(--accent) }
.switch.on::after{ left:21px }

/* Footer quick links */
.footer-links{
  display:flex; gap:12px; margin:12px 8px;
}
.link-btn{
  background:#ddd2b9; border:0; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600
}

/* Leaderboard */
.lb-row{ display:flex; align-items:center; justify-content:space-between; padding:10px 0; border-bottom:1px dashed rgba(0,0,0,.1) }
.lb-row:last-child{ border-bottom:0 }

/* Bottom navigation
   - center the nav directly underneath the framed .screen
   - keep it visually aligned to the frame rather than full-viewport width */
.bottom-nav{
  position: fixed;
  width: var(--frame-width);
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(max((100vh - var(--frame-height))/2, 12px)); /* place nav just below the centered frame; fallback 12px on very small viewports */
  height: 72px;
  background: var(--brown, #6b4b3d);
  display:flex; justify-content:space-around; align-items:center;
  padding:10px 8px calc(env(safe-area-inset-bottom, 0) + 8px);
  z-index: 9999;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}
.nav-btn{
  width:56px; height:48px; border-radius:12px; border:none; color:#fff; background:transparent;
  display:grid; place-items:center; cursor:pointer; transition:.15s transform ease;
}
.nav-btn:active{ transform: translateY(1px) }
.nav-btn.active{ background:rgba(255,255,255,.12) }
.nav-btn svg{ width:28px; height:28px }

/* Small screens: keep the frame fixed size but allow the surrounding layout to adapt */
@media (max-width:360px){
  /* If the viewport is smaller than the frame width, scale the frame down to fit */
  .screen{
    transform: scale(calc((100vw - 24px) / var(--frame-width)));
    transform-origin: top center;
  }
  .bottom-nav{
    transform: translateX(-50%) scale(calc((100vw - 24px) / var(--frame-width)));
    transform-origin: bottom center;
  }
}
